<?xml version="1.0" ?>
<project default="main">

    <property name="src" location="../src/main/java" />
    <property name="output" location="bin" />
    <property environment="env" />

    <target name="main" depends="init, compile, run">
        <echo>
            Building and running....
        </echo>
    </target>
  
    <target name="init">
        <delete dir="${output}" />
        <mkdir dir="${output}" />
    </target>
  
    <target name="compile">
        <javac srcdir="${src}" destdir="${output}" includeantruntime="false"/>
    </target>
  
    <target name="run" >
        <java
        	classname="gengfo.jvm.thread.HelloWorldThread"
        	jvm="C:/Program Files/Java/jdk1.6.0_11/bin/java" fork="true"
        	>
        	
            	<classpath>
               		<pathelement location="${output}"/>
            	</classpath>
            <!-- http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#PerformanceTuning -->
            <!-- -agentlib:libname[=options] -->
            <jvmarg value="-Xms64m"/> 
            <jvmarg value="-Xmx64m"/> 
            
            <jvmarg value="-XX:PermSize=64m"/> 
            <!-- server MaxPermSize default 64m, client MaxPermSize default 32m -->	
            <jvmarg value="-XX:MaxPermSize=64m"/> 
            
            <!--
            <jvmarg value="-verbose:gc"/> 
            -->
            
            <jvmarg value="-XX:+PrintGCDetails"/>
                        
            <!-- thread dump -->
            <!-- Ctrl+Break for Windows; kill -SIGQUIT <pid> for Unix;Java.lang.Thread.getAllStackTraces()-->
            <!-- -XX:-PrintClassHistogram -->
            
            <!-- heap dump -->
            <!-- Ctrl+Break with -XX:+HeapDumpOnCtrlBreak option-->
            <!-- -Xrunhprof -agentlib:hprof=heap=dump,format=b-->
            <!--Trigger with any JMX tool for JVM6.0 -->
            
            <!--
            <jvmarg value="-verbose:gc" />
            <jvmarg value="-XX:+PrintGCDetails" />
            <jvmarg value="-XX:+HeapDumpOnOutOfMemoryError" />
            <jvmarg value="-XX:HeapDumpPath=java_oom.hprof" />
            
            	-Xloggc:c:\gc.log / -verbose:gc 
		-XX:+PrintGCDetails -XX:+PrintGCTimeStamps 
		-XX:-HeapDumpOnOutOfMemoryError
		-XX:-PrintClassHistogram
            -->
            
        </java>
    </target>
	
</project>